# üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

## –û–±—â–∞—è —Å—Ö–µ–º–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                       TELEGRAM                               ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ  –û—Å–Ω–æ–≤–Ω–æ–π    ‚îÇ    ‚îÇ   Mini App   ‚îÇ   ‚îÇ  –ê–¥–º–∏–Ω-–±–æ—Ç   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ     –ë–æ—Ç      ‚îÇ    ‚îÇ   (Web UI)   ‚îÇ   ‚îÇ              ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
          ‚îÇ                   ‚îÇ                   ‚îÇ
          ‚îÇ                   ‚îÇ                   ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      BACKEND (Python)                        ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ   Telegram   ‚îÇ    ‚îÇ   FastAPI    ‚îÇ   ‚îÇ  Admin Bot   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ     Bot      ‚îÇ    ‚îÇ   REST API   ‚îÇ   ‚îÇ   Handler    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ   (aiogram)  ‚îÇ    ‚îÇ              ‚îÇ   ‚îÇ              ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ         ‚îÇ                   ‚îÇ                   ‚îÇ            ‚îÇ
‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò            ‚îÇ
‚îÇ                             ‚îÇ                                ‚îÇ
‚îÇ                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                      ‚îÇ
‚îÇ                    ‚îÇ   Services       ‚îÇ                      ‚îÇ
‚îÇ                    ‚îÇ  (–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞) ‚îÇ                      ‚îÇ
‚îÇ                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚îÇ
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ   PostgreSQL      ‚îÇ
                    ‚îÇ   (–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)   ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### 1. ü§ñ –û—Å–Ω–æ–≤–Ω–æ–π Telegram-–±–æ—Ç (aiogram)

**–ó–∞–¥–∞—á–∏:**
- –û–Ω–±–æ—Ä–¥–∏–Ω–≥ –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (—Å–±–æ—Ä –§–ò–û, —Ç–µ–ª–µ—Ñ–æ–Ω–∞, —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–∞–Ω–Ω—ã—Ö)
- –ó–∞–ø—É—Å–∫ Mini App (–∫–Ω–æ–ø–∫–∞ "–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ")
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–ø–æ–∑–∂–µ)

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**
- `aiogram 3.x` ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è Telegram Bot API
- FSM (Finite State Machine) ‚Äî –¥–ª—è –º–Ω–æ–≥–æ—à–∞–≥–æ–≤–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

**–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:**
- `/start` ‚Äî –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ + –∫–Ω–æ–ø–∫–∞ "–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è"
- `/help` ‚Äî –ø–æ–º–æ—â—å
- `/profile` ‚Äî —Å—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª—å –≤ Mini App

---

### 2. üåê Mini App (Telegram Web App)

**Frontend (React):**
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤–Ω—É—Ç—Ä–∏ Telegram
- –ù–∞–≤–∏–≥–∞—Ü–∏—è: –ì–ª–∞–≤–Ω–∞—è / –ö—É—Ä—Å—ã / –°–æ–æ–±—â–µ—Å—Ç–≤–∞ / –ü—Ä–æ—Ñ–∏–ª—å
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–≤–∏–¥–µ–æ, PDF)
- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä, –≥–∞–ª–æ—á–∫–∏

**Backend (FastAPI):**
- REST API –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
- –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã: –∫—É—Ä—Å—ã, —É—Ä–æ–∫–∏, –ø—Ä–æ–≥—Ä–µ—Å—Å, –ø—Ä–æ—Ñ–∏–ª—å
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ `Telegram.WebApp.initData` (–ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏)

**–°–≤—è–∑—å:**
```
User -> Telegram -> Mini App (React) -> API (FastAPI) -> Database
```

---

### 3. üë®‚Äçüíº –ê–¥–º–∏–Ω-–±–æ—Ç

**–ó–∞–¥–∞—á–∏:**
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (—Å–∫–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–∞–∫–∏–µ –∫—É—Ä—Å—ã –ø–æ–ø—É–ª—è—Ä–Ω—ã)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–∞–º–∏ (–¥–æ–±–∞–≤–∏—Ç—å/—É–¥–∞–ª–∏—Ç—å/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (–ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–æ—Ñ–∏–ª—å, –ø—Ä–æ–≥—Ä–µ—Å—Å)
- –û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–∞—Å—Å—ã–ª–æ–∫ (–ø–æ–∑–∂–µ)

**–î–æ—Å—Ç—É–ø:**
- –¢–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤ (–ø—Ä–æ–≤–µ—Ä–∫–∞ `user_id` –≤ –∫–æ–Ω—Ñ–∏–≥–µ)

**–ü—Ä–∏–º–µ—Ä—ã –∫–æ–º–∞–Ω–¥:**
- `/stats` ‚Äî –æ–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `/users` ‚Äî —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `/courses` ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–∞–º–∏

---

### 4. üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (PostgreSQL)

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:**

#### `users`
- `id` (PK)
- `telegram_id` (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π)
- `full_name`
- `phone`
- `city` (–¥–ª—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π —á–∞—Ç–æ–≤)
- `created_at`
- `consent_personal_data` (bool)

#### `courses`
- `id` (PK)
- `title`
- `description`
- `category` (–º–∞–Ω–∏–∫—é—Ä, —Ä–µ—Å–Ω–∏—Ü—ã –∏ —Ç.–¥.)
- `cover_image_url`
- `is_top` (—Ç–æ–ø –∫—É—Ä—Å –º–µ—Å—è—Ü–∞)
- `price` (–¥–ª—è –æ–ø–ª–∞—Ç—ã –ø–æ–∑–∂–µ)
- `created_at`

#### `lessons`
- `id` (PK)
- `course_id` (FK -> courses)
- `title`
- `order` (–ø–æ—Ä—è–¥–æ–∫ —É—Ä–æ–∫–∞ –≤ –∫—É—Ä—Å–µ)
- `video_url` (—Å—Å—ã–ª–∫–∞ –Ω–∞ –≤–∏–¥–µ–æ)
- `pdf_url` (—Å—Å—ã–ª–∫–∞ –Ω–∞ PDF/—á–µ–∫-–ª–∏—Å—Ç)

#### `user_courses` (—Å–≤—è–∑—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∫—É—Ä—Å–æ–≤)
- `id` (PK)
- `user_id` (FK -> users)
- `course_id` (FK -> courses)
- `purchased_at` (–∫–æ–≥–¥–∞ –∫—É–ø–∏–ª/–ø–æ–ª—É—á–∏–ª –¥–æ—Å—Ç—É–ø)
- `completed_at` (–∫–æ–≥–¥–∞ –∑–∞–≤–µ—Ä—à–∏–ª)

#### `user_progress` (–ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ —É—Ä–æ–∫–∞–º)
- `id` (PK)
- `user_id` (FK -> users)
- `lesson_id` (FK -> lessons)
- `completed` (bool)
- `completed_at`

#### `achievements` (–¥–ª—è –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–∏, –ø–æ–∑–∂–µ)
- `id` (PK)
- `title`
- `description`
- `icon_url`

#### `user_achievements`
- `user_id` (FK -> users)
- `achievement_id` (FK -> achievements)
- `earned_at`

---

## –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```
1. User –Ω–∞–∂–∏–º–∞–µ—Ç START –Ω–∞ –±–æ—Ç–µ
   ‚Üì
2. –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ + –∫–Ω–æ–ø–∫—É "–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è"
   ‚Üì
3. User –Ω–∞–∂–∏–º–∞–µ—Ç "–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è"
   ‚Üì
4. –ë–æ—Ç –ø—Ä–æ—Å–∏—Ç —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–∞–Ω–Ω—ã—Ö (–≥–∞–ª–æ—á–∫–∞ + –∫–Ω–æ–ø–∫–∞ "–°–æ–≥–ª–∞—Å–µ–Ω")
   ‚Üì
5. –ë–æ—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –§–ò–û (—Å–æ—Å—Ç–æ—è–Ω–∏–µ FSM: WAITING_FULLNAME)
   ‚Üì
6. User –≤–≤–æ–¥–∏—Ç –§–ò–û
   ‚Üì
7. –ë–æ—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Ç–µ–ª–µ—Ñ–æ–Ω (—Å–æ—Å—Ç–æ—è–Ω–∏–µ FSM: WAITING_PHONE)
   ‚Üì
8. User –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–Ω—Ç–∞–∫—Ç (–∏–ª–∏ –≤–≤–æ–¥–∏—Ç –≤—Ä—É—á–Ω—É—é)
   ‚Üì
9. –ë–æ—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –ë–î (—Ç–∞–±–ª–∏—Ü–∞ users)
   ‚Üì
10. –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–Ω–æ–ø–∫—É "–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ" (Mini App)
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü—Ä–æ—Å–º–æ—Ç—Ä –∫—É—Ä—Å–∞

```
1. User –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç Mini App
   ‚Üì
2. React –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç Telegram.WebApp
   ‚Üì
3. Frontend –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∫—É—Ä—Å–æ–≤: GET /api/courses
   ‚Üì
4. Backend (FastAPI) –ø—Ä–æ–≤–µ—Ä—è–µ—Ç initData (–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)
   ‚Üì
5. Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∫—É—Ä—Å–æ–≤ –∏–∑ –ë–î
   ‚Üì
6. User –∫–ª–∏–∫–∞–µ—Ç –Ω–∞ –∫—É—Ä—Å
   ‚Üì
7. Frontend –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –¥–µ—Ç–∞–ª–∏: GET /api/courses/{id}
   ‚Üì
8. Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫—É—Ä—Å + —Å–ø–∏—Å–æ–∫ —É—Ä–æ–∫–æ–≤
   ‚Üì
9. User –∫–ª–∏–∫–∞–µ—Ç –Ω–∞ —É—Ä–æ–∫
   ‚Üì
10. Frontend –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É —É—Ä–æ–∫–∞ (–≤–∏–¥–µ–æ + PDF)
    ‚Üì
11. User –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç —É—Ä–æ–∫, –Ω–∞–∂–∏–º–∞–µ—Ç "–ó–∞–≤–µ—Ä—à–∏—Ç—å"
    ‚Üì
12. Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç: POST /api/lessons/{id}/complete
    ‚Üì
13. Backend –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ç–∞–±–ª–∏—Ü—É user_progress
    ‚Üì
14. Frontend –æ–±–Ω–æ–≤–ª—è–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä
```

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### 1. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ Mini App

Telegram –ø–µ—Ä–µ–¥–∞—ë—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≤–∏–¥–µ —Å—Ç—Ä–æ–∫–∏ `initData`:
```
query_id=...&user=%7B%22id%22%3A123...&auth_date=1234567890&hash=abc123...
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ backend:**
1. –ü–∞—Ä—Å–∏–º `initData`
2. –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–ø–∏—Å—å `hash` —Å –ø–æ–º–æ—â—å—é `bot_token` (HMAC-SHA256)
3. –ü—Ä–æ–≤–µ—Ä—è–µ–º `auth_date` (–Ω–µ —Å—Ç–∞—Ä—à–µ 5 –º–∏–Ω—É—Ç)
4. –ò–∑–≤–ª–µ–∫–∞–µ–º `user.id` –∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫–∞–∫ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä

**–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞:** –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é –∏–ª–∏ –Ω–∞–ø–∏—Å–∞—Ç—å —Å–≤–æ—é.

### 2. –ê–¥–º–∏–Ω-–±–æ—Ç

–ü—Ä–æ–≤–µ—Ä–∫–∞ `telegram_id` –∞–¥–º–∏–Ω–∞:
```python
ADMIN_IDS = [123456789, 987654321]  # –∏–∑ .env

if message.from_user.id not in ADMIN_IDS:
    return await message.answer("‚õî –£ –≤–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞")
```

---

## –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ (–¥–ª—è –±—É–¥—É—â–µ–≥–æ)

### –¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (MVP)
- –û–¥–∏–Ω —Å–µ—Ä–≤–µ—Ä (VPS)
- PostgreSQL –Ω–∞ —Ç–æ–º –∂–µ —Å–µ—Ä–≤–µ—Ä–µ
- –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –≤ Docker Compose

### –ü—Ä–∏ —Ä–æ—Å—Ç–µ –Ω–∞–≥—Ä—É–∑–∫–∏:
1. **–†–∞–∑–¥–µ–ª–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã:**
   - Backend API ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
   - Telegram –±–æ—Ç—ã ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
   - PostgreSQL ‚Äî managed DB (Yandex Cloud, AWS RDS)

2. **–î–æ–±–∞–≤–∏—Ç—å –∫–µ—à:**
   - Redis –¥–ª—è —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö (—Å–ø–∏—Å–æ–∫ –∫—É—Ä—Å–æ–≤)

3. **–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ –Ω–∞–≥—Ä—É–∑–∫–∏:**
   - Nginx –ø–µ—Ä–µ–¥ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∏–Ω—Å—Ç–∞–Ω—Å–∞–º–∏ FastAPI

4. **CDN –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞:**
   - Cloudflare –¥–ª—è –≤–∏–¥–µ–æ/–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

---

## –•—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

### –í–∏–¥–µ–æ –∏ PDF

**–í–∞—Ä–∏–∞–Ω—Ç—ã:**

1. **S3-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**
   - AWS S3
   - Cloudflare R2 (–¥–µ—à–µ–≤–ª–µ, –±–µ–∑ egress fees)
   - Yandex Object Storage
   - MinIO (self-hosted)

2. **Telegram File Storage:**
   - –§–∞–π–ª—ã –¥–æ 2GB –º–æ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –≤ Telegram
   - –ü–æ–ª—É—á–∞–µ–º `file_id` –∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø–æ–≤—Ç–æ—Ä–Ω–æ
   - –ú–∏–Ω—É—Å: –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç Telegram API

**–î–ª—è MVP:**
- –ò—Å–ø–æ–ª—å–∑—É–µ–º Telegram –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤
- –î–ª—è –±–æ–ª—å—à–∏—Ö –≤–∏–¥–µ–æ ‚Äî –≤—Ä–µ–º–µ–Ω–Ω–æ YouTube (unlisted) –∏–ª–∏ Vimeo

**–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:**
- Cloudflare R2 (–¥–µ—à–µ–≤–ª–µ S3)

---

## –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
docker-compose up -d  # PostgreSQL + Redis
python backend/main.py  # Backend
cd frontend && npm run dev  # Frontend
```

### –ü—Ä–æ–¥–∞–∫—à–µ–Ω (VPS)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env
docker-compose -f docker-compose.prod.yml up -d

# Nginx –∫–∞–∫ reverse proxy:
# - https://yourdomain.com/api -> FastAPI (backend:8000)
# - https://yourdomain.com -> Frontend (—Å—Ç–∞—Ç–∏–∫–∞)
```

**–î–æ–º–µ–Ω –∏ SSL:**
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –¥–æ–º–µ–Ω–∞ (Reg.ru, Timeweb)
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ A-–∑–∞–ø–∏—Å–∏ –Ω–∞ IP —Å–µ—Ä–≤–µ—Ä–∞
- Let's Encrypt –¥–ª—è SSL (certbot)

---

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- Python: `logging` –º–æ–¥—É–ª—å
- –£—Ä–æ–≤–Ω–∏: DEBUG, INFO, WARNING, ERROR
- –§–∞–π–ª—ã: `logs/bot.log`, `logs/api.log`

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- **–î–ª—è MVP:** –ø—Ä–æ—Å—Ç—ã–µ –ª–æ–≥–∏
- **–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:**
  - Sentry (–æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫)
  - Prometheus + Grafana (–º–µ—Ç—Ä–∏–∫–∏)

---

## –ò—Ç–æ–≥–∏

–≠—Ç–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç:
‚úÖ –ë—ã—Å—Ç—Ä–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å MVP
‚úÖ –õ–µ–≥–∫–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å—Å—è –ø—Ä–∏ —Ä–æ—Å—Ç–µ
‚úÖ –†–∞–∑–¥–µ–ª–∏—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥: **—Å—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö** ‚Üí `database.md`

